# store history FOR-EV-ER
export HISTFILE="${HOME}/.history/$(date -u +%Y-%m-%d.%H.%M.%S)_$$"
export SAVEHIST=100
setopt APPEND_HISTORY
setopt SHARE_HISTORY

export PATH="/usr/local/sbin:$PATH"

# beep, beep
if [ -f ~/.secrets ]; then; source ~/.secrets; fi

# z
. /usr/local/etc/profile.d/z.sh

# fix delete key
bindkey "^[[3~" delete-char

# j
[ -f /usr/local/etc/profile.d/autojump.sh ] && . /usr/local/etc/profile.d/autojump.sh


#
# LOOKS
#

# folor $color shortcuts
autoload -U colors && colors
export TERM='xterm-256color'

EMOJI=(
☕️
🍄
🍕
🍪
🎨
🐌
🐦
🐶
👽
💀
💎
💜
💩
💰
🔮
🙃
🚀
🤑
🤖
🦀
🦄
)

settitle() {
  # set iTerm2 window title
  echo -ne "\e]1;$1\a"
}

emoji="$EMOJI[$RANDOM%$#EMOJI+1]"

get_left_prompt() {
  if [ ! -z $SSH_CLIENT ]; then
    hostname=`hostname`
    echo -n "(${hostname}) ${emoji}  "
  else
    echo -n "${emoji}  "
  fi
}

settitle $emoji

PROMPT=$(get_left_prompt)
RPROMPT="%{$fg[magenta]%}%c%{$reset_color%}"

#
# COMPLETION
#

# tab-complete anywhere in filename
zstyle ':completion:*' completer _complete
zstyle ':completion:*' matcher-list '' 'm:{[:lower:][:upper:]}={[:upper:][:lower:]}' '+l:|=* r:|=*'
autoload -Uz compinit
compinit

#
# KEY BINDINGS
#

export EDITOR='vim'

if [ -f ~/.aliases ]
then
  source ~/.aliases
fi

unsetopt correct_all

# brew install zsh-syntax-highlighting
if [ -f /usr/local/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh ]
then
  export ZSH_HIGHLIGHT_HIGHLIGHTERS_DIR=/usr/local/share/zsh-syntax-highlighting/highlighters
  source /usr/local/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
fi


if [ -e /usr/local/bin/rbenv ]; then
  export PATH="$HOME/.rbenv/bin:$PATH"
  eval "$(rbenv init -)"
fi

#
# LANGUAGE-SPECIFIC SETTINGS
#

# Python

PIPENV_COLORBLIND=1

# NPM
export PATH=$PATH:/usr/local/share/npm/bin

# go
export PATH=$PATH:$HOME/go/bin

# for gems installed by Homebrew Ruby
# make sure $PATH goes first!
export PATH="$PATH:/usr/local/opt/ruby/bin"

# so CPAN installs modules to ~/perl5
#:eval $(perl -I$HOME/perl5/lib/perl5 -Mlocal::lib)

PERL_MB_OPT="--install_base \"/Users/austin/perl5\""; export PERL_MB_OPT;
PERL_MM_OPT="INSTALL_BASE=/Users/austin/perl5"; export PERL_MM_OPT;
